<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran App</title>
    <style>
        :root { --gold: #c5a059; --dark: #0a0a0a; --card: #161616; --white: #ffffff; }
        body { font-family: sans-serif; background: var(--dark); color: var(--white); margin: 0; padding: 0; text-align: center; }
        header { background: #000; padding: 15px; border-bottom: 2px solid var(--gold); }
        .container { max-width: 600px; margin: auto; padding: 10px; }
        
        /* Ø´Ø±ÙŠØ· Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© */
        .prayer-times { display: flex; justify-content: space-around; background: var(--card); padding: 10px; border-radius: 10px; border: 1px solid var(--gold); margin-bottom: 15px; font-size: 11px; }
        .prayer-times div b { color: var(--gold); display: block; margin-bottom: 3px; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± */
        .surah-item { background: var(--card); padding: 15px; margin: 8px 0; border-radius: 10px; cursor: pointer; display: flex; justify-content: space-between; border: 1px solid #333; transition: 0.3s; }
        .surah-item:hover { border-color: var(--gold); }
        
        /* Ø´Ø§Ø´Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø© */
        #view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark); display: none; flex-direction: column; z-index: 1000; }
        .view-header { background: #000; padding: 15px; border-bottom: 1px solid var(--gold); display: flex; justify-content: space-between; align-items: center; }
        .text-content { flex: 1; overflow-y: auto; padding: 25px; font-size: 26px; line-height: 2.2; text-align: center; }
        .player-bar { background: #000; padding: 15px; border-top: 1px solid var(--gold); }
        
        button { cursor: pointer; background: var(--gold); border: none; padding: 10px 15px; border-radius: 8px; font-weight: bold; }
        .font-btns button { background: #333; color: white; border: 1px solid var(--gold); margin: 0 5px; width: 40px; }
        audio { width: 100%; height: 45px; filter: invert(1); }
    </style>
</head>
<body>

<header><h1>Quran App ğŸ“–</h1></header>

<div class="container">
    <div class="prayer-times" id="p-times">
        <div><b>Ø§Ù„ÙØ¬Ø±</b><span id="fj">-</span></div>
        <div><b>Ø§Ù„Ø¸Ù‡Ø±</b><span id="dh">-</span></div>
        <div><b>Ø§Ù„Ø¹ØµØ±</b><span id="as">-</span></div>
        <div><b>Ø§Ù„Ù…ØºØ±Ø¨</b><span id="mg">-</span></div>
        <div><b>Ø§Ù„Ø¹Ø´Ø§Ø¡</b><span id="is">-</span></div>
    </div>

    <div id="list">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±...</div>
</div>

<div id="view">
    <div class="view-header">
        <button onclick="closeView()" style="background:#e74c3c; color:white;">ğŸ”™ Ø®Ø±ÙˆØ¬</button>
        <div class="font-btns">
            <button onclick="changeFont(2)">+</button>
            <button onclick="changeFont(-2)">-</button>
        </div>
    </div>
    <div id="quran-text" class="text-content"></div>
    <div class="player-bar">
        <p id="s-name" style="color:var(--gold); margin-bottom:10px; font-weight:bold;"></p>
        <audio id="player" controls></audio>
    </div>
</div>

<script>
    let fontSize = 26;

    // Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ù„Ù†Ø¸Ø§Ù… 12 Ø³Ø§Ø¹Ø©
    function t12(time) {
        let [h, m] = time.split(':');
        let ampm = h >= 12 ? 'Ù…Ø³Ø§Ø¡Ù‹' : 'ØµØ¨Ø§Ø­Ø§Ù‹';
        h = h % 12 || 12;
        return `${h}:${m} ${ampm}`;
    }

    // Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    navigator.geolocation.getCurrentPosition(pos => {
        fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=4`)
        .then(r => r.json()).then(d => {
            const t = d.data.timings;
            document.getElementById('fj').innerText = t12(t.Fajr);
            document.getElementById('dh').innerText = t12(t.Dhuhr);
            document.getElementById('as').innerText = t12(t.Asr);
            document.getElementById('mg').innerText = t12(t.Maghrib);
            document.getElementById('is').innerText = t12(t.Isha);
        });
    }, () => {
        document.getElementById('p-times').innerHTML = "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…ÙˆØ§Ù‚ÙŠØª";
    });

    // Ø¬Ù„Ø¨ Ø§Ù„Ø³ÙˆØ±
    async function getSurahs() {
        const res = await fetch('https://api.alquran.cloud/v1/surah');
        const data = await res.json();
        const listDiv = document.getElementById('list');
        listDiv.innerHTML = "";
        data.data.forEach(s => {
            listDiv.innerHTML += `
            <div class="surah-item" onclick="openSurah(${s.number}, '${s.name}')">
                <span>${s.number}. ${s.name}</span>
                <small style="color:var(--gold)">ğŸ§ Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ø³ØªÙ…Ø§Ø¹</small>
            </div>`;
        });
    }

    // ÙØªØ­ Ø§Ù„Ø³ÙˆØ±Ø©
    async function openSurah(id, name) {
        document.getElementById('view').style.display = 'flex';
        document.getElementById('s-name').innerText = "Ø³ÙˆØ±Ø© " + name;
        document.getElementById('quran-text').innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ§Øª...";
        
        // ØµÙˆØª Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ
        document.getElementById('player').src = `https://server10.mp3quran.net/minsh/${id.toString().padStart(3, '0')}.mp3`;
        
        const res = await fetch(`https://api.alquran.cloud/v1/surah/${id}`);
        const data = await res.json();
        document.getElementById('quran-text').innerText = data.data.ayahs.map(a => a.text + ` ï´¿${a.numberInSurah}ï´¾`).join(' ');
    }

    function closeView() { 
        document.getElementById('view').style.display = 'none'; 
        document.getElementById('player').pause(); 
    }

    function changeFont(n) { 
        fontSize += n; 
        document.getElementById('quran-text').style.fontSize = fontSize + 'px'; 
    }

    getSurahs();
</script>
</body>
</html>
